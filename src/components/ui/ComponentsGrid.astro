---
import AffiliateButton from "./AffiliateButton.astro";

interface BuildComponent {
    name: string;
    asin: string;
    category: string;
    price?: number;
    description?: string;
    alternativeAsin?: string;
}

interface Props {
    components: BuildComponent[];
}

const { components } = Astro.props;

const categoryIcons: Record<string, string> = {
    cpu: "ğŸ§ ",
    gpu: "ğŸ®",
    motherboard: "ğŸ”Œ",
    ram: "ğŸ’¾",
    storage: "ğŸ’½",
    case: "ğŸ“¦",
    psu: "âš¡",
    cooling: "â„ï¸",
    default: "ğŸ”§",
};
---

<div class="my-12">
    <h2 class="text-2xl font-bold mb-6 flex items-center gap-2">
        <span>ğŸ› ï¸</span> Parts List
    </h2>

    <div class="grid gap-4">
        {
            components.map((part) => (
                <div class="bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl p-4 md:p-6 transition-all hover:border-indigo-500/50 group">
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-2xl flex-shrink-0">
                                {categoryIcons[part.category.toLowerCase()] ||
                                    categoryIcons.default}
                            </div>
                            <div>
                                <div class="text-xs font-bold uppercase tracking-wider text-zinc-500 mb-1">
                                    {part.category}
                                </div>
                                <h3 class="font-bold text-lg text-zinc-900 dark:text-zinc-100 group-hover:text-indigo-400 transition-colors">
                                    {part.name}
                                </h3>
                                {part.description && (
                                    <p class="text-sm text-zinc-600 dark:text-zinc-400 mt-1 max-w-xl">
                                        {part.description}
                                    </p>
                                )}
                            </div>
                        </div>

                        <div class="flex items-center gap-4 mt-2 md:mt-0 ml-16 md:ml-0">
                            {part.price && (
                                <div class="text-lg font-bold text-zinc-700 dark:text-zinc-300 whitespace-nowrap">
                                    ${part.price}
                                </div>
                            )}
                            <AffiliateButton
                                asin={part.asin}
                                label="Buy"
                                size="sm"
                            />
                        </div>
                    </div>
                </div>
            ))
        }
    </div>
</div>
